---
// DespedidaFinal.astro - Despedida elegante y hermosa para el final
---

<section
    class="relative w-full min-h-screen flex flex-col items-center justify-center overflow-hidden"
>
    <!-- Contenido principal -->
    <div class="relative z-10 text-center px-6 max-w-5xl mx-auto">
        <!-- Imagen superior -->
        <div class="flex justify-center opacity-0" id="ornamento-top-final">
            <img
                src="/imagenes/florseparador.png"
                alt="Decoraci√≥n floral superior"
                class="w-40 h-40 md:w-40 md:h-40 lg:w-48 lg:h-48 object-contain"
            />
        </div>

        <!-- Mensaje de agradecimiento principal -->
        <div class="space-y-2">
            <h2
                id="titulo-agradecimiento"
                class="font-charm text-[#9C7A2E] text-2xl md:text-3xl lg:text-4xl xl:text-4xl font-bold opacity-0 leading-tight"
            >
                Gracias por acompa√±arnos
            </h2>

            <p
                id="subtitulo-agradecimiento"
                class="font-charm text-[#0F3D2E]/80 text-xl md:text-3xl lg:text-3xl opacity-0 leading-relaxed max-w-3xl mx-auto"
            >
                en el d√≠a m√°s especial de nuestras vidas
            </p>
        </div>

        <!-- Divisor decorativo con coraz√≥n -->
        <div
            class="flex items-center justify-center gap-2 my-8 opacity-0"
            id="divisor-corazon"
        >
            <div class="flex-1 max-w-[200px]">
                <div
                    class="h-[2px] w-full bg-gradient-to-r from-transparent via-[#C9A961] to-[#C9A961]"
                >
                </div>
            </div>

            <div class="relative">
                <svg
                    class="w-12 h-12 md:w-16 md:h-16 text-[#C9A961] animate-[pulse-heart_2s_ease-in-out_infinite]"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                >
                    <path
                        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
                    ></path>
                </svg>
                <!-- Part√≠culas alrededor del coraz√≥n -->
                <div
                    class="absolute top-0 left-0 w-2 h-2 bg-[#C9A961]/60 rounded-full animate-[orbit_4s_linear_infinite]"
                >
                </div>
                <div
                    class="absolute top-0 right-0 w-1.5 h-1.5 bg-[#C9A961]/60 rounded-full animate-[orbit_4s_linear_infinite_2s]"
                >
                </div>
            </div>

            <div class="flex-1 max-w-[200px]">
                <div
                    class="h-[2px] w-full bg-gradient-to-l from-transparent via-[#C9A961] to-[#C9A961]"
                >
                </div>
            </div>
        </div>

        <!-- Mensaje "Te esperamos" -->
        <div class="mb-8">
            <p
                id="texto-te-esperamos-final"
                class="font-charm text-[#0F3D2E] text-xl md:text-3xl lg:text-3xl xl:text-3xl opacity-0 leading-relaxed"
            >
                Te esperamos con los brazos abiertos
            </p>
        </div>

        <!-- Nombres de los novios con estilo elegante -->
        <div class="mb-48 space-y-4">
            <h1
                id="nombre-1-final"
                class="font-great-vibes text-6xl md:text-7xl lg:text-8xl xl:text-9xl text-[#C9A961] leading-tight italic font-light opacity-0 drop-shadow-[0_2px_10px_rgba(201,169,97,0.3)]"
            >
                Mauricio
            </h1>

            <!-- Separador con & elegante -->
            <div
                class="flex items-center justify-center gap-6 py-2 opacity-0"
                id="separador-y-final"
            >
                <div class="relative">
                    <div
                        class="h-[1px] w-20 md:w-28 bg-gradient-to-r from-transparent to-[#C9A961]"
                    >
                    </div>
                    <div
                        class="absolute right-0 top-1/2 -translate-y-1/2 w-2 h-2 bg-[#C9A961] rounded-full"
                    >
                    </div>
                </div>

                <span
                    class="font-great-vibes text-5xl md:text-6xl lg:text-7xl text-[#0F3D2E] font-serif relative"
                >
                    <span
                        class="absolute inset-0 text-[#C9A961] blur-sm opacity-50"
                        >&</span
                    >
                    <span class="relative">&</span>
                </span>

                <div class="relative">
                    <div
                        class="h-[1px] w-20 md:w-28 bg-gradient-to-l from-transparent to-[#C9A961]"
                    >
                    </div>
                    <div
                        class="absolute left-0 top-1/2 -translate-y-1/2 w-2 h-2 bg-[#C9A961] rounded-full"
                    >
                    </div>
                </div>
            </div>

            <h1
                id="nombre-2-final"
                class="font-great-vibes text-6xl md:text-7xl lg:text-8xl xl:text-9xl text-[#C9A961] leading-tight italic font-light opacity-0 drop-shadow-[0_2px_10px_rgba(201,169,97,0.3)]"
            >
                Marisol
            </h1>
        </div>
    </div>

    <!-- Imagen inferior -->
    <div
        class="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-20 opacity-0"
        id="ornamento-bottom-final"
    >
        <img
            src="/imagenes/florseparador.png"
            alt="Decoraci√≥n floral inferior"
            class="w-40 h-40 md:w-40 md:h-40 lg:w-48 lg:h-48 object-contain"
        />
    </div>
</section>

<style>
    @keyframes float {
        0%,
        100% {
            transform: translateY(0) scale(1);
        }
        50% {
            transform: translateY(-20px) scale(1.05);
        }
    }

    @keyframes pulse {
        0%,
        100% {
            transform: scale(1);
            opacity: 0.3;
        }
        50% {
            transform: scale(1.1);
            opacity: 0.5;
        }
    }

    @keyframes twinkle {
        0%,
        100% {
            opacity: 0.3;
            transform: scale(1);
        }
        50% {
            opacity: 1;
            transform: scale(1.5);
        }
    }

    @keyframes pulse-heart {
        0%,
        100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.1);
        }
    }

    @keyframes orbit {
        0% {
            transform: rotate(0deg) translateX(30px) rotate(0deg);
        }
        100% {
            transform: rotate(360deg) translateX(30px) rotate(-360deg);
        }
    }

    @keyframes shimmer {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(200%);
        }
    }

    @keyframes slide-up {
        from {
            transform: translateY(60px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    @keyframes scale-in {
        from {
            transform: scale(0.8);
            opacity: 0;
        }
        to {
            transform: scale(1);
            opacity: 1;
        }
    }

    @keyframes fade-in {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
</style>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    const initDespedidaFinalBonita = () => {
        console.log("‚ú®üíñ Iniciando Despedida Final Hermosa...");

        // Estado inicial
        gsap.set("#ornamento-top-final", {
            opacity: 0,
            scale: 0.5,
            y: -30,
        });
        gsap.set("#titulo-agradecimiento", { opacity: 0, y: 40 });
        gsap.set("#subtitulo-agradecimiento", { opacity: 0, y: 30 });
        gsap.set("#divisor-corazon", { opacity: 0, scale: 0 });
        gsap.set("#texto-te-esperamos-final", { opacity: 0, y: 30 });
        gsap.set("#nombre-1-final", { opacity: 0, y: 50, scale: 0.9 });
        gsap.set("#separador-y-final", { opacity: 0, scale: 0 });
        gsap.set("#nombre-2-final", { opacity: 0, y: 50, scale: 0.9 });
        gsap.set("#fecha-final-box", { opacity: 0, y: 40, scale: 0.9 });
        gsap.set("#ornamento-bottom-final", { opacity: 0, scale: 0.5 });

        ScrollTrigger.create({
            trigger: "section",
            start: "top 70%",
            end: "top 20%",

            onEnter: () => {
                const tl = gsap.timeline();

                tl
                    // Ornamento superior aparece suavemente
                    .to(
                        "#ornamento-top-final",
                        {
                            opacity: 1,
                            scale: 1,
                            y: 0,
                            duration: 1.5,
                            ease: "back.out(1.5)",
                        },
                        0,
                    )

                    // T√≠tulo principal
                    .to(
                        "#titulo-agradecimiento",
                        {
                            opacity: 1,
                            y: 0,
                            duration: 1.2,
                            ease: "power3.out",
                        },
                        0.3,
                    )

                    // Subt√≠tulo
                    .to(
                        "#subtitulo-agradecimiento",
                        {
                            opacity: 1,
                            y: 0,
                            duration: 1.2,
                            ease: "power3.out",
                        },
                        0.5,
                    )

                    // Divisor con coraz√≥n
                    .to(
                        "#divisor-corazon",
                        {
                            opacity: 1,
                            scale: 1,
                            duration: 1,
                            ease: "elastic.out(1, 0.5)",
                        },
                        0.7,
                    )

                    // Texto "Te esperamos"
                    .to(
                        "#texto-te-esperamos-final",
                        {
                            opacity: 1,
                            y: 0,
                            duration: 1.2,
                            ease: "power3.out",
                        },
                        0.9,
                    )

                    // Primer nombre
                    .to(
                        "#nombre-1-final",
                        {
                            opacity: 1,
                            y: 0,
                            scale: 1,
                            duration: 1.5,
                            ease: "power3.out",
                        },
                        1.1,
                    )

                    // Separador &
                    .to(
                        "#separador-y-final",
                        {
                            opacity: 1,
                            scale: 1,
                            duration: 1,
                            ease: "back.out(1.5)",
                        },
                        1.3,
                    )

                    // Segundo nombre
                    .to(
                        "#nombre-2-final",
                        {
                            opacity: 1,
                            y: 0,
                            scale: 1,
                            duration: 1.5,
                            ease: "power3.out",
                        },
                        1.5,
                    )

                    // Fecha
                    .to(
                        "#fecha-final-box",
                        {
                            opacity: 1,
                            y: 0,
                            scale: 1,
                            duration: 1.2,
                            ease: "back.out(1.2)",
                        },
                        1.7,
                    )

                    // Ornamento inferior
                    .to(
                        "#ornamento-bottom-final",
                        {
                            opacity: 1,
                            scale: 1,
                            duration: 1.5,
                            ease: "elastic.out(1, 0.5)",
                        },
                        1.9,
                    );
            },

            onLeaveBack: () => {
                gsap.set("#ornamento-top-final", {
                    opacity: 0,
                    scale: 0.5,
                    y: -30,
                });
                gsap.set("#titulo-agradecimiento", { opacity: 0, y: 40 });
                gsap.set("#subtitulo-agradecimiento", { opacity: 0, y: 30 });
                gsap.set("#divisor-corazon", { opacity: 0, scale: 0 });
                gsap.set("#texto-te-esperamos-final", { opacity: 0, y: 30 });
                gsap.set("#nombre-1-final", { opacity: 0, y: 50, scale: 0.9 });
                gsap.set("#separador-y-final", { opacity: 0, scale: 0 });
                gsap.set("#nombre-2-final", { opacity: 0, y: 50, scale: 0.9 });
                gsap.set("#fecha-final-box", { opacity: 0, y: 40, scale: 0.9 });
                gsap.set("#ornamento-bottom-final", { opacity: 0, scale: 0.5 });
            },
        });

        console.log("‚ú®üíñ‚ú® Despedida Final Hermosa activada!");
    };

    document.addEventListener("DOMContentLoaded", initDespedidaFinalBonita);
    document.addEventListener("astro:page-load", initDespedidaFinalBonita);
</script>
