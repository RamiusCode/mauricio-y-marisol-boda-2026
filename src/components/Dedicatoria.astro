---
// Componente de secci√≥n de escritura con animaci√≥n elegante mejorada
---

<section
  class="relative w-full py-2 md:py-8 flex flex-col items-center justify-center overflow-hidden"
>
  <div
    class="relative max-w-4xl md:max-w-5xl lg:max-w-6xl px-4 text-center message-container"
  >
    <!-- Ornamento superior minimalista -->
    <div
      class="top-flourish mb-4 md:mb-8 lg:mb-10 opacity-0 translate-y-[-20px]"
    >
      <div
        class="w-16 md:w-24 lg:w-32 h-[1px] mx-auto bg-gradient-to-r from-transparent via-[#9C7A2E] to-transparent relative"
      >
        <div
          class="absolute w-0.5 h-0.5 md:w-1 md:h-1 bg-[#9C7A2E] rounded-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
        >
        </div>
      </div>
    </div>

    <!-- Cita b√≠blica completa -->
    <div class="scripture-wrapper">
      <!-- Cita completa en bloque -->
      <div class="quote-block opacity-0 scale-95 translate-y-10">
        <p
          class="font-charm text-xl md:text-3xl lg:text-3xl xl:text-4xl text-[#0F3D2E] leading-relaxed md:leading-tight lg:leading-tight mb-2 md:mb-10 lg:mb-12"
        >
          As√≠ que no son ya m√°s dos, sino una sola carne; por tanto, lo que Dios
          junt√≥, no lo separe el hombre.
        </p>
      </div>

      <!-- Separador sutil integrado -->
      <div class="divider-section opacity-0 translate-y-8">
        <div class="flex items-center justify-center gap-3 md:gap-6 lg:gap-8">
          <div
            class="divider-line line-left w-16 md:w-32 lg:w-40 h-[1px] bg-gradient-to-r from-transparent via-[#6b5d54]/30 to-transparent scale-x-0 origin-right"
          >
          </div>
          <div
            class="divider-dot w-1 h-1 md:w-1.5 md:h-1.5 lg:w-2 lg:h-2 bg-[#4a3f35]/40 rounded-full opacity-0 scale-0"
          >
          </div>
          <div
            class="divider-line line-right w-16 md:w-32 lg:w-40 h-[1px] bg-gradient-to-r from-transparent via-[#6b5d54]/30 to-transparent scale-x-0 origin-left"
          >
          </div>
        </div>
      </div>

      <!-- Referencia b√≠blica integrada -->
      <p
        class="reference-text font-cormorant text-base md:text-xl lg:text-2xl xl:text-3xl text-[#9C7A2E] tracking-[0.35em] md:tracking-[0.4em] lg:tracking-[0.45em] uppercase mt-2 md:mt-6 lg:mt-8 opacity-0 translate-y-6 font-light"
      >
        Mateo 19:6
      </p>
    </div>

    <!-- Ornamento inferior -->
    <div
      class="bottom-flourish mt-2 md:mt-8 lg:mt-10 opacity-0 translate-y-[20px]"
    >
      <div
        class="w-20 md:w-32 lg:w-40 h-[1px] mx-auto bg-gradient-to-r from-transparent via-[#9C7A2E]/40 to-transparent"
      >
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initAnimation);
  } else {
    initAnimation();
  }

  function initAnimation() {
    // üéØ ESTADO INICIAL - Todo oculto
    gsap.set(".top-flourish", { opacity: 0, y: -20 });
    gsap.set(".quote-block", { opacity: 0, scale: 0.95, y: 10 });
    gsap.set(".divider-section", { opacity: 0, y: 8 });
    gsap.set(".line-left", { scaleX: 0 });
    gsap.set(".line-right", { scaleX: 0 });
    gsap.set(".divider-dot", { opacity: 0, scale: 0 });
    gsap.set(".reference-text", { opacity: 0, y: 6 });
    gsap.set(".bottom-flourish", { opacity: 0, y: 20 });

    // ‚ú® ANIMACI√ìN CON CASCADA ELEGANTE
    ScrollTrigger.create({
      trigger: ".message-container",
      start: "top 80%",
      end: "top 20%",

      onEnter: () => {
        const tl = gsap.timeline();

        // Animaci√≥n en cascada elegante
        tl
          // Ornamento superior aparece primero
          .to(
            ".top-flourish",
            {
              opacity: 1,
              y: 0,
              duration: 1.2,
              ease: "power2.out",
            },
            0,
          )

          // Texto principal entra con suavidad
          .to(
            ".quote-block",
            {
              opacity: 1,
              scale: 1,
              y: 0,
              duration: 1.8,
              ease: "power3.out",
            },
            0.2,
          )

          // Divisor aparece cuando el texto est√° visible
          .to(
            ".divider-section",
            {
              opacity: 1,
              y: 0,
              duration: 1.2,
              ease: "power2.out",
            },
            0.6,
          )

          // L√≠neas se expanden desde el centro (ambas a la vez)
          .to(
            ".line-left, .line-right",
            {
              scaleX: 1,
              duration: 1.4,
              ease: "power2.inOut",
            },
            0.8,
          )

          // Punto central con efecto el√°stico muy sutil
          .to(
            ".divider-dot",
            {
              opacity: 1,
              scale: 1,
              duration: 1.0,
              ease: "back.out(1.2)",
            },
            1.0,
          )

          // Referencia b√≠blica aparece al final
          .to(
            ".reference-text",
            {
              opacity: 1,
              y: 0,
              duration: 1.3,
              ease: "power2.out",
            },
            1.2,
          )

          // Ornamento inferior cierra la secuencia
          .to(
            ".bottom-flourish",
            {
              opacity: 1,
              y: 0,
              duration: 1.2,
              ease: "power2.out",
            },
            1.4,
          );
      },

      onLeaveBack: () => {
        // Resetear todo al salir por arriba - R√ÅPIDO
        const tl = gsap.timeline();

        tl.to(
          ".top-flourish, .quote-block, .divider-section, .line-left, .line-right, .divider-dot, .reference-text, .bottom-flourish",
          {
            opacity: 0,
            duration: 0.4,
            ease: "power2.in",
          },
        )
          .to(
            ".top-flourish",
            {
              y: -20,
              duration: 0.4,
              ease: "power2.in",
            },
            "<",
          )
          .to(
            ".quote-block",
            {
              scale: 0.95,
              y: 10,
              duration: 0.4,
              ease: "power2.in",
            },
            "<",
          )
          .to(
            ".divider-section",
            {
              y: 8,
              duration: 0.4,
              ease: "power2.in",
            },
            "<",
          )
          .to(
            ".line-left, .line-right",
            {
              scaleX: 0,
              duration: 0.4,
              ease: "power2.in",
            },
            "<",
          )
          .to(
            ".divider-dot",
            {
              scale: 0,
              duration: 0.4,
              ease: "power2.in",
            },
            "<",
          )
          .to(
            ".reference-text",
            {
              y: 6,
              duration: 0.4,
              ease: "power2.in",
            },
            "<",
          )
          .to(
            ".bottom-flourish",
            {
              y: 20,
              duration: 0.4,
              ease: "power2.in",
            },
            "<",
          );
      },
    });
  }
</script>

<style>
  .message-container {
    perspective: 1000px;
  }

  .quote-block {
    backface-visibility: hidden;
    transform-style: preserve-3d;
  }
</style>
